<div ng-controller="authViewController as vm" ng-init="vm.init()" class="content-right">
    <h4>权限查看</h4>
    <hr>

    <div class="step-content" ng-show="vm.stepIndex==0">
        <div class="step-head form-inline">
            当前权限类型
            <select ng-model="vm.selectType" class="form-control">
                <option value="User">用户</option>
                <option value="Role">角色</option>
            </select>
            <span class="side-control">
                <select class="form-control" ng-model="vm.controlType">
                    <option value="">批量操作...</option>
                    <option value="delete">取消授权</option>
                </select>
                <button class="btn btn-primary" ng-click="vm.deleteAuth()">应用</button>
            </span>

        </div>
        <div class="row">
            <div class="col-sm-3">
                <table ng-table="vm.tableParams" class="table table-hover auth-table">
                    <tr ng-repeat="(index,row) in $data" ng-click="vm.loadAuthList(row.ID,index)" ng-class="{'selected':vm.selectedIdx==index}">
                        <td width="50" title="'ID'">{{row.ID}}</td>
                        <td ng-if="vm.selectType=='User'" title="'用户名'">{{row[vm.selectType+'Name']}}</td>
                        <td ng-if="vm.selectType=='Role'" title="'角色名'">{{row[vm.selectType+'Name']}}</td>
                    </tr>
                </table>
            </div>
            <div class="col-sm-9">
                <table ng-table="vm.authTableParams" class="table table-hover auth-table">
                    <thead>
                        <tr>
                            <th>
                                <input type="checkbox" ng-model="vm.checkedAuth.checked" ng-click="vm.checkAll($event)">
                            </th>
                            <th ng-repeat="item in vm.authListHead track by $index" ng-if="$index!=2&&$index!=5">{{item | authName}}</th>
                        </tr>
                    </thead>
                    <tr ng-repeat="row in $data" ng-class={"selected":vm.checkedAuth.items[row[0]]}>
                        <td>
                            <input type="checkbox" ng-model="vm.checkedAuth.items[row[0]]" ng-click="vm.selectSame(row[0],$event)">
                        </td>
                        <td ng-repeat="value in row track by $index" ng-if="$index!=2&&$index!=5">{{value | authName}}</td>
                    </tr>
                </table>
            </div>
        </div>

    </div>
</div>